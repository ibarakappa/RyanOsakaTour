<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2025 日本關西之旅 | 大阪 x 京都</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Noto Sans TC", sans-serif;
        background-color: #f8fafc;
        color: #334155;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #94a3b8;
      }

      /* Timeline Styles */
      .timeline-line::before {
        content: "";
        position: absolute;
        top: 20px;
        bottom: 0;
        left: 20px;
        width: 2px;
        background: #e2e8f0;
        z-index: 0;
      }

      .active-nav {
        color: #0ea5e9;
        border-bottom: 2px solid #0ea5e9;
      }

      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1);
      }

      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body class="bg-slate-50 min-h-screen flex flex-col">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
      <div class="max-w-5xl mx-auto px-4">
        <div class="flex justify-between items-center h-16">
          <div
            class="flex items-center gap-2 cursor-pointer"
            onclick="router('overview')"
          >
            <i data-lucide="plane" class="text-sky-500"></i>
            <span class="font-bold text-lg text-slate-800 tracking-wide"
              >Kansai Trip 2025</span
            >
          </div>

          <!-- Desktop Menu -->
          <div
            class="hidden md:flex space-x-8 text-sm font-medium text-slate-500"
          >
            <button
              onclick="router('overview')"
              id="nav-overview"
              class="hover:text-sky-500 transition-colors py-5 border-b-2 border-transparent"
            >
              總覽
            </button>
            <button
              onclick="router('transport')"
              id="nav-transport"
              class="hover:text-sky-500 transition-colors py-5 border-b-2 border-transparent"
            >
              交通住宿
            </button>
            <button
              onclick="router('itinerary')"
              id="nav-itinerary"
              class="hover:text-sky-500 transition-colors py-5 border-b-2 border-transparent"
            >
              每日行程
            </button>
            <button
              onclick="router('food')"
              id="nav-food"
              class="hover:text-sky-500 transition-colors py-5 border-b-2 border-transparent"
            >
              美食地圖
            </button>
            <button
              onclick="router('prep')"
              id="nav-prep"
              class="hover:text-sky-500 transition-colors py-5 border-b-2 border-transparent"
            >
              行前準備
            </button>
          </div>

          <!-- Mobile Menu Button -->
          <div class="md:hidden flex items-center">
            <button
              onclick="toggleMobileMenu()"
              class="outline-none mobile-menu-button p-2"
            >
              <i data-lucide="menu" class="w-6 h-6 text-slate-500"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- Mobile Menu -->
      <div
        class="hidden mobile-menu md:hidden bg-white border-t border-slate-100 p-4 shadow-lg absolute w-full z-50"
      >
        <button
          onclick="router('overview')"
          class="block py-3 text-sm text-slate-600 hover:text-sky-500 w-full text-left border-b border-slate-50"
        >
          總覽
        </button>
        <button
          onclick="router('transport')"
          class="block py-3 text-sm text-slate-600 hover:text-sky-500 w-full text-left border-b border-slate-50"
        >
          交通住宿
        </button>
        <button
          onclick="router('itinerary')"
          class="block py-3 text-sm text-slate-600 hover:text-sky-500 w-full text-left border-b border-slate-50"
        >
          每日行程
        </button>
        <button
          onclick="router('food')"
          class="block py-3 text-sm text-slate-600 hover:text-sky-500 w-full text-left border-b border-slate-50"
        >
          美食地圖
        </button>
        <button
          onclick="router('prep')"
          class="block py-3 text-sm text-slate-600 hover:text-sky-500 w-full text-left"
        >
          行前準備
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-5xl mx-auto w-full px-4 py-6">
      <!-- SECTION: OVERVIEW -->
      <section id="overview" class="fade-in space-y-6">
        <!-- Hero Card -->
        <div
          class="bg-gradient-to-r from-sky-500 to-indigo-600 rounded-3xl shadow-xl relative overflow-hidden"
        >
          <div
            class="absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white opacity-10 rounded-full blur-3xl"
          ></div>
          <div
            class="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-sky-300 opacity-20 rounded-full blur-2xl"
          ></div>
          <div class="relative z-10 grid md:grid-cols-2 gap-8 items-center">
            <div class="p-8 md:p-12">
              <span
                class="inline-block px-3 py-1 bg-white/20 backdrop-blur-md rounded-full text-xs font-semibold mb-4 text-sky-50 border border-white/30"
                >日本行</span
              >
              <h1 class="text-3xl md:text-5xl font-bold mb-4 tracking-tight text-white">
                大阪京都五天四夜之旅
              </h1>
              <p class="text-sky-100 flex items-center gap-2 text-lg">
                <i data-lucide="calendar" class="w-5 h-5"></i>
                12/2 (一) - 12/6 (五)
              </p>
            </div>
            <div class="hidden md:block">
              <img src="擐.webp" alt="大阪夜景" class="rounded-l-3xl object-cover h-full w-full">
            </div>
          </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div
            class="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 text-center hover:border-sky-200 transition-colors"
          >
            <div class="text-3xl font-bold text-sky-600 mb-1">5</div>
            <div class="text-xs text-slate-500 font-medium uppercase">天數</div>
          </div>
          <div
            class="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 text-center hover:border-emerald-200 transition-colors"
          >
            <div class="text-3xl font-bold text-emerald-600 mb-1">2</div>
            <div class="text-xs text-slate-500 font-medium uppercase">
              城市 (大阪/京都)
            </div>
          </div>
          <div
            class="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 text-center hover:border-amber-200 transition-colors"
          >
            <div class="text-3xl font-bold text-amber-500 mb-1">46</div>
            <div class="text-xs text-slate-500 font-medium uppercase">
              精選美食
            </div>
          </div>
          <div
            class="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 text-center hover:border-rose-200 transition-colors"
          >
            <div class="text-3xl font-bold text-rose-500 mb-1">1.8w</div>
            <div class="text-xs text-slate-500 font-medium uppercase">
              日均步數上限
            </div>
          </div>
        </div>

        <!-- Accommodation & Itinerary Summary Card -->
        <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 space-y-4">
            <h2 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                <i data-lucide="list-checks" class="text-sky-500"></i> 行程概覽
            </h2>
            <div class="space-y-3">
                <div class="flex items-start gap-3">
                    <i data-lucide="hotel" class="w-5 h-5 text-indigo-500 flex-shrink-0"></i>
                    <div>
                        <h3 class="font-semibold text-slate-700">住宿資訊</h3>
                        <p class="text-sm text-slate-600"><strong>心齋橋長堀通哈頓酒店</strong>：位於心齋橋，交通便利，方便前往大阪及京都。</p>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <i data-lucide="map-pin" class="w-5 h-5 text-emerald-500 flex-shrink-0"></i>
                    <div>
                        <h3 class="font-semibold text-slate-700">每日重點行程</h3>
                        <ul class="text-sm text-slate-600 list-disc pl-5 space-y-1">
                            <li>12/2 (一): 抵達大阪關西機場，辦理飯店入住。</li>
                            <li>12/3 (二): 暢遊大阪南區與新世界 (黑門市場、通天閣、道頓堀等)。</li>
                            <li>12/4 (三): 京都經典一日遊 (伏見稻荷大社、清水寺、祇園)。</li>
                            <li>12/5 (四): 大阪周遊卡日，深度探索大阪 (大阪城、今昔館、梅田)。</li>
                            <li>12/6 (五): 退房，搭機返程。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div
          class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-xl flex items-start gap-3"
        >
          <i
            data-lucide="info"
            class="h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"
          ></i>
          <div class="text-sm text-blue-800">
            <strong class="block mb-1">重要提醒：</strong>
            12/5
            為「大阪周遊卡」日，行程較為緊湊，請務必留意各設施入場時間。大阪城與通天閣皆可免費入場。
          </div>
        </div>
      </section>

      <!-- SECTION: TRANSPORT & ACCOMMODATION -->
      <section id="transport" class="hidden fade-in space-y-6">
        <!-- Hotel Info -->
        <div
          class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"
        >
          <div class="p-6 grid md:grid-cols-2 gap-8">
            <div>
              <div class="flex justify-between items-start mb-4">
                <div>
                  <span
                    class="inline-block px-2 py-1 bg-indigo-50 text-indigo-600 rounded text-xs font-bold mb-2"
                    >住宿</span
                  >
                  <h3 class="font-bold text-slate-800 text-2xl">
                    心齋橋長堀通哈頓酒店
                  </h3>
                  <p class="text-slate-500 text-sm mt-1">
                    Hearton Hotel Shinsaibashi Nagahoridori
                  </p>
                </div>
              </div>
              <p class="text-slate-600 mb-4 text-sm leading-relaxed">
                位於交通極為便利的地區，靠近心齋橋站、長堀橋站以及御堂筋線，前往各景點和鄰近城市（如京都）都非常方便。
              </p>
              <a
                href="https://www.google.com/maps/search/?api=1&query=Hearton+Hotel+Shinsaibashi+Nagahoridori"
                target="_blank"
                class="inline-flex items-center gap-2 bg-sky-50 text-sky-600 px-4 py-2 rounded-full text-sm font-medium hover:bg-sky-100 transition"
              >
                <i data-lucide="map-pin" class="w-4 h-4"></i> 查看地圖導航
              </a>
            </div>
            <div class="bg-slate-50 p-5 rounded-xl border border-slate-100">
              <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2">
                <i data-lucide="plane" class="w-5 h-5 text-slate-400"></i>
                航班資訊
              </h3>
              <div class="space-y-4">
                <div class="relative pl-4 border-l-2 border-slate-300">
                  <span
                    class="absolute -left-[5px] top-1 w-2 h-2 rounded-full bg-slate-300"
                  ></span>
                  <span class="block text-xs text-slate-500 mb-1"
                    >去程 (12/2)</span
                  >
                  <div class="flex justify-between font-medium text-slate-800">
                    <span>KHH 高雄</span>
                    <i
                      data-lucide="arrow-right"
                      class="w-4 h-4 text-slate-400"
                    ></i>
                    <span>KIX 關西</span>
                  </div>
                  <div class="text-xs text-slate-400 mt-1">18:30 抵達</div>
                </div>
                <div class="relative pl-4 border-l-2 border-slate-300">
                  <span
                    class="absolute -left-[5px] top-1 w-2 h-2 rounded-full bg-slate-300"
                  ></span>
                  <span class="block text-xs text-slate-500 mb-1"
                    >回程 (12/6)</span
                  >
                  <div class="flex justify-between font-medium text-slate-800">
                    <span>KIX 關西</span>
                    <i
                      data-lucide="arrow-right"
                      class="w-4 h-4 text-slate-400"
                    ></i>
                    <span>KHH 高雄</span>
                  </div>
                  <div class="text-xs text-slate-400 mt-1">11:05 起飛</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Charts Row -->
        <div class="grid md:grid-cols-2 gap-6">
          <!-- Cost Chart -->
          <div
            class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100"
          >
            <h3
              class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2"
            >
              <i data-lucide="pie-chart" class="text-amber-500"></i>
              交通費用預估 (JPY)
            </h3>
            <div class="h-64">
              <canvas id="costChart"></canvas>
            </div>
            <p class="text-xs text-slate-400 text-center mt-4">
              *12/5 使用周遊卡省下約 ¥2000+
            </p>
          </div>
          <!-- Steps Chart -->
          <div
            class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100"
          >
            <h3
              class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2"
            >
              <i data-lucide="footprints" class="text-rose-500"></i>
              預估每日步數
            </h3>
            <div class="h-64">
              <canvas id="stepChart"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION: ITINERARY -->
      <section id="itinerary" class="hidden fade-in space-y-6">
        <!-- Date Tabs -->
        <div
          class="flex overflow-x-auto pb-2 gap-3 hide-scrollbar sticky top-16 bg-slate-50 pt-2 z-40"
        >
          <button
            onclick="renderItinerary('day1')"
            class="date-tab flex-shrink-0 active px-5 py-2.5 rounded-full text-sm font-bold transition-all bg-sky-500 text-white shadow-lg shadow-sky-200"
          >
            12/2 抵達
          </button>
          <button
            onclick="renderItinerary('day2')"
            class="date-tab flex-shrink-0 px-5 py-2.5 rounded-full text-sm font-medium transition-all bg-white text-slate-600 hover:bg-white hover:text-sky-500 border border-slate-200"
          >
            12/3 大阪南
          </button>
          <button
            onclick="renderItinerary('day3')"
            class="date-tab flex-shrink-0 px-5 py-2.5 rounded-full text-sm font-medium transition-all bg-white text-slate-600 hover:bg-white hover:text-sky-500 border border-slate-200"
          >
            12/4 京都
          </button>
          <button
            onclick="renderItinerary('day4')"
            class="date-tab flex-shrink-0 px-5 py-2.5 rounded-full text-sm font-medium transition-all bg-white text-slate-600 hover:bg-white hover:text-sky-500 border border-slate-200"
          >
            12/5 周遊卡
          </button>
          <button
            onclick="renderItinerary('day5')"
            class="date-tab flex-shrink-0 px-5 py-2.5 rounded-full text-sm font-medium transition-all bg-white text-slate-600 hover:bg-white hover:text-sky-500 border border-slate-200"
          >
            12/6 返程
          </button>
        </div>

        <!-- Timeline Container -->
        <div
          id="timeline-container"
          class="bg-white rounded-3xl shadow-sm border border-slate-100 p-6 md:p-8 min-h-[600px]"
        >
          <!-- Dynamic Content via JS -->
        </div>
      </section>

      <!-- SECTION: FOOD MAP -->
      <section id="food" class="hidden fade-in space-y-6">
        <div
          class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-2xl shadow-sm border border-slate-100 sticky top-20 z-30"
        >
          <h2
            class="text-xl font-bold text-slate-800 flex items-center gap-2 px-2"
          >
            <i data-lucide="utensils" class="text-amber-500"></i> 美食地圖
          </h2>

          <!-- Filters -->
          <div class="flex flex-wrap gap-2 text-xs w-full md:w-auto">
            <button
              onclick="filterFood('all')"
              class="food-filter flex-1 md:flex-none active px-4 py-2 rounded-full bg-slate-800 text-white transition-all text-center"
            >
              全部
            </button>
            <button
              onclick="filterFood('osaka')"
              class="food-filter flex-1 md:flex-none px-4 py-2 rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-all text-center"
            >
              大阪區
            </button>
            <button
              onclick="filterFood('kyoto')"
              class="food-filter flex-1 md:flex-none px-4 py-2 rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-all text-center"
            >
              京都區
            </button>
            <button
              onclick="filterFood('main')"
              class="food-filter flex-1 md:flex-none px-4 py-2 rounded-full bg-amber-50 text-amber-700 hover:bg-amber-100 transition-all text-center"
            >
              正餐
            </button>
            <button
              onclick="filterFood('sweet')"
              class="food-filter flex-1 md:flex-none px-4 py-2 rounded-full bg-pink-50 text-pink-700 hover:bg-pink-100 transition-all text-center"
            >
              甜點
            </button>
          </div>
        </div>

        <!-- Food Grid -->
        <div
          id="food-grid"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
        >
          <!-- Food items injected via JS -->
        </div>
      </section>

      <!-- SECTION: PREP -->
      <section id="prep" class="hidden fade-in space-y-6">
        <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <div class="p-2 bg-sky-100 rounded-lg text-sky-600">
              <i data-lucide="clipboard-check" class="w-6 h-6"></i>
            </div>
            行前檢查表
          </h2>
          <div class="grid md:grid-cols-2 gap-4">
            <label
              class="flex items-start space-x-3 p-4 rounded-xl hover:bg-slate-50 border border-slate-100 hover:border-sky-200 cursor-pointer transition-colors"
            >
              <input
                type="checkbox"
                class="form-checkbox h-5 w-5 mt-0.5 text-sky-600 rounded focus:ring-sky-500 border-slate-300"
              />
              <div>
                <span class="block text-slate-800 font-medium">護照</span>
                <span class="text-xs text-slate-500">有效期限需6個月以上</span>
              </div>
            </label>
            <label
              class="flex items-start space-x-3 p-4 rounded-xl hover:bg-slate-50 border border-slate-100 hover:border-sky-200 cursor-pointer transition-colors"
            >
              <input
                type="checkbox"
                class="form-checkbox h-5 w-5 mt-0.5 text-sky-600 rounded focus:ring-sky-500 border-slate-300"
              />
              <div>
                <span class="block text-slate-800 font-medium"
                  >Visit Japan Web</span
                >
                <span class="text-xs text-slate-500"
                  >完成填寫並截圖 QR Code</span
                >
              </div>
            </label>
            <label
              class="flex items-start space-x-3 p-4 rounded-xl hover:bg-slate-50 border border-slate-100 hover:border-sky-200 cursor-pointer transition-colors"
            >
              <input
                type="checkbox"
                class="form-checkbox h-5 w-5 mt-0.5 text-sky-600 rounded focus:ring-sky-500 border-slate-300"
              />
              <div>
                <span class="block text-slate-800 font-medium">網路/網卡</span>
                <span class="text-xs text-slate-500"
                  >確認漫遊開通或 SIM 卡已備</span
                >
              </div>
            </label>
            <label
              class="flex items-start space-x-3 p-4 rounded-xl hover:bg-slate-50 border border-slate-100 hover:border-sky-200 cursor-pointer transition-colors"
            >
              <input
                type="checkbox"
                class="form-checkbox h-5 w-5 mt-0.5 text-sky-600 rounded focus:ring-sky-500 border-slate-300"
              />
              <div>
                <span class="block text-slate-800 font-medium">日幣現金</span>
                <span class="text-xs text-slate-500"
                  >部分老店 (如翁大阪燒) 僅收現金</span
                >
              </div>
            </label>
            <label
              class="flex items-start space-x-3 p-4 rounded-xl hover:bg-slate-50 border border-slate-100 hover:border-sky-200 cursor-pointer transition-colors"
            >
              <input
                type="checkbox"
                class="form-checkbox h-5 w-5 mt-0.5 text-sky-600 rounded focus:ring-sky-500 border-slate-300"
              />
              <div>
                <span class="block text-slate-800 font-medium"
                  >交通卡 (ICOCA/Suica)</span
                >
                <span class="text-xs text-slate-500"
                  >存入 Apple Pay 或準備實體卡</span
                >
              </div>
            </label>
            <label
              class="flex items-start space-x-3 p-4 rounded-xl hover:bg-slate-50 border border-slate-100 hover:border-sky-200 cursor-pointer transition-colors"
            >
              <input
                type="checkbox"
                class="form-checkbox h-5 w-5 mt-0.5 text-sky-600 rounded focus:ring-sky-500 border-slate-300"
              />
              <div>
                <span class="block text-slate-800 font-medium">好走的鞋</span>
                <span class="text-xs text-slate-500"
                  >每日步數預估 1.6萬 - 1.8萬步</span
                >
              </div>
            </label>
          </div>
        </div>
      </section>
    </main>

    <footer class="bg-white border-t border-slate-200 py-8 mt-auto">
      <div class="max-w-4xl mx-auto px-4 text-center">
        <p class="text-slate-500 text-sm">© 2025 Kansai Trip Dashboard</p>
        <p class="text-slate-400 text-xs mt-2">
          Designed for Family Trip • Osaka & Kyoto
        </p>
      </div>
    </footer>

    <!-- Button to generate map link -->
    <script>
      function getMap(query) {
        return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(
          query
        )}`;
      }

      // ================= DATA =================
            const itineraryData = {
              day1: {
                title: "12/2 (一) 抵達日",
                steps: "3,000",
                image: "Image/Kansai International Airport.jpg",
                events: [
                  {
                    time: "18:30",
                    type: "arrival",
                    title: "抵達關西機場 (KIX)",
                    desc: "歡迎來到日本！出關後記得先去領取行李，如果有需要可以先在機場購買 ICOCA 卡。",
                    map: "Kansai International Airport",
                    eventImage: "Image/Kansai International Airport.jpg",
                  },
                  {
                    time: "19:30",
                    type: "transport",
                    title: "前往飯店",
                    desc: "搭乘南海電鐵或 Haruka 特急前往市區，轉乘地鐵至心齋橋站。",
                    map: "Kansai Airport Station",
                    eventImage: "Image/Shinsaibashi Station.jpg",
                  },
                  {
                    time: "21:00",
                    type: "hotel",
                    title: "辦理入住",
                    desc: "心齋橋長堀通哈頓酒店。放下行李，簡單整理一下。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                    eventImage: "Image/Hearton Hotel Shinsaibashi Nagahoridori.jpg",
                  },
                  {
                    time: "21:30",
                    type: "food",
                    title: "附近晚餐/超商",
                    desc: "第一天舟車勞頓，建議在飯店附近吃個簡單的便利商店美食或拉麵，早點休息。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                    eventImage: "Image/1202_dinner.jpg",
                  },
                ],
              },
              day2: {
                title: "12/3 (二) 大阪南區與新世界",
                steps: "16,000",
                image: "Image/Dotonbori Glico Sign.jpg",
                events: [
                  {
                    time: "09:00",
                    type: "walk",
                    title: "前往黑門市場",
                    desc: "從飯店出發步行約 15-20 分鐘。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                    eventImage: "Image/Kuromon Ichiba Market.webp",
                  },
                  {
                    time: "09:20",
                    type: "activity",
                    title: "黑門市場",
                    desc: "【大阪人的廚房】這裡有最新鮮的海鮮、神戶牛和各式小吃。推薦嘗試現烤扇貝或豆漿。",
                    map: "Kuromon Ichiba Market",
                    eventImage: "Image/Kuromon Ichiba Market.webp",
                  },
                  {
                    time: "11:20",
                    type: "activity",
                    title: "難波八阪神社",
                    desc: "【巨大獅子頭】非常有震撼力的獅子殿，據說可以吸走厄運、招來好運，是必拍的打卡點。",
                    map: "Namba Yasaka Shrine",
                    eventImage: "Image/Namba Yasaka Shrine.jpg",
                  },
                  {
                    time: "12:00",
                    type: "food",
                    title: "午餐 (難波/日本橋)",
                    desc: "在難波附近享用午餐，推薦拉麵或日式定食。",
                    map: "Namba Station",
                    eventImage: "Image/Dotonbori Glico Sign.jpg",
                  },
                  {
                    time: "13:00",
                    type: "transport",
                    title: "前往新世界",
                    desc: "搭乘地鐵堺筋線：日本橋 -> 惠美須町 (約¥240)。",
                    map: "Ebisucho Station",
                    eventImage: "Image/Tsutenkaku.webp",
                  },
                  {
                    time: "13:20",
                    type: "activity",
                    title: "通天閣 & 新世界",
                    desc: "【昭和風情】大阪的地標之一，充滿復古氛圍的街道。這裡也是「串炸」的發源地，非常熱鬧。",
                    map: "Tsutenkaku",
                    eventImage: "Image/Tsutenkaku.webp",
                  },
                  {
                    time: "15:20",
                    type: "transport",
                    title: "返回心齋橋",
                    desc: "搭乘地鐵返回心齋橋。",
                    map: "Shinsaibashi Station",
                    eventImage: "Image/Shinsaibashi Station.jpg",
                  },
                  {
                    time: "15:40",
                    type: "shop",
                    title: "心齋橋筋商店街",
                    desc: "【購物天堂】有屋頂的商店街，不受天氣影響。藥妝、服飾、百貨應有盡有。",
                    map: "Shinsaibashisuji",
                  },
                  {
                    time: "17:40",
                    type: "activity",
                    title: "道頓堀散策",
                    desc: "【大阪印象】必拍固力果跑跑人看板！這裡有巨大的螃蟹、章魚招牌，晚上燈光閃爍非常漂亮。",
                    map: "Dotonbori Glico Sign",
                  },
                  {
                    time: "18:40",
                    type: "food",
                    title: "晚餐：大阪燒/章魚燒",
                    desc: "在道頓堀享受最道地的大阪燒或章魚燒。",
                    map: "Dotonbori",
                  },
                  {
                    time: "19:40",
                    type: "activity",
                    title: "道頓堀水上觀光船",
                    desc: "搭船遊覽道頓堀川，從水面上欣賞熱鬧的夜景，別有一番風味。",
                    map: "Tombori River Cruise",
                  },
                  {
                    time: "20:40",
                    type: "walk",
                    title: "返回飯店",
                    desc: "步行回飯店休息，儲備明天去京都的體力。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                  },
                ],
              },
              day3: {
                title: "12/4 (三) 京都經典一日遊",
                steps: "18,000",
                image: "Image/Fushimi Inari Taisha.webp",
                events: [
                  {
                    time: "07:30",
                    type: "transport",
                    title: "出發前往京都",
                    desc: "地鐵至淀屋橋/北濱，轉乘京阪電車特急列車。",
                    map: "Yodoyabashi Station",
                  },
                  {
                    time: "09:00",
                    type: "activity",
                    title: "伏見稻荷大社",
                    desc: "【千本鳥居】綿延不絕的紅色鳥居隧道，非常壯觀。建議早點到避開人潮，走到半山腰風景就很好了。",
                    map: "Fushimi Inari Taisha",
                  },
                  {
                    time: "11:30",
                    type: "transport",
                    title: "前往祇園",
                    desc: "搭乘京阪電車：伏見稻荷 -> 祇園四條。",
                    map: "Gion-Shijo Station",
                  },
                  {
                    time: "11:45",
                    type: "food",
                    title: "午餐 (祇園/河原町)",
                    desc: "在祇園周邊享用午餐。",
                    map: "Gion",
                  },
                  {
                    time: "12:45",
                    type: "activity",
                    title: "花見小路 & 八坂神社",
                    desc: "【藝伎街區】保存了古老風貌的街道，運氣好能看到藝伎。接著參拜八坂神社。",
                    map: "Hanamikoji Street",
                  },
                  {
                    time: "13:45",
                    type: "transport",
                    title: "前往清水寺",
                    desc: "搭乘巴士 (207/86等) 至五條坂。",
                    map: "Kiyomizu-dera",
                  },
                  {
                    time: "14:15",
                    type: "activity",
                    title: "清水寺 & 二三年坂",
                    desc: "【世界遺產】清水舞台是必看重點，全木造結構無使用釘子。參觀完後逛逛二三年坂的特色小店。",
                    map: "Kiyomizu-dera",
                  },
                  {
                    time: "16:45",
                    type: "activity",
                    title: "八坂塔 & 庚申堂",
                    desc: "【經典視角】從八坂通往上看八坂塔，是京都最經典的畫面之一。庚申堂則有色彩繽紛的許願猴。",
                    map: "Yasaka Pagoda",
                  },
                  {
                    time: "17:45",
                    type: "shop",
                    title: "河原町商圈",
                    desc: "京都最熱鬧的購物區，適合採買伴手禮。",
                    map: "Shijo Kawaramachi",
                  },
                  {
                    time: "19:45",
                    type: "food",
                    title: "晚餐 (四條河原町)",
                    desc: "享用晚餐。",
                    map: "Shijo Kawaramachi",
                  },
                  {
                    time: "20:45",
                    type: "transport",
                    title: "返回大阪",
                    desc: "京阪電車 + 地鐵返回大阪飯店。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                  },
                ],
              },
              day4: {
                title: "12/5 (四) 大阪周遊卡日",
                steps: "17,000",
                image: "Image/Osaka Castle.jpg",
                events: [
                  {
                    time: "09:00",
                    type: "transport",
                    title: "出發",
                    desc: "地鐵至森之宮/谷町四丁目 (使用周遊卡免費)。",
                    map: "Osaka Castle Park",
                  },
                  {
                    time: "09:30",
                    type: "activity",
                    title: "大阪城天守閣",
                    desc: "【歷史名城】豐臣秀吉的居城，外觀宏偉金碧輝煌。登頂可以俯瞰大阪市景。(周遊卡免費)",
                    map: "Osaka Castle",
                  },
                  {
                    time: "12:00",
                    type: "food",
                    title: "午餐",
                    desc: "在谷町四丁目周邊用餐。",
                    map: "Tanimachi 4-chome Station",
                  },
                  {
                    time: "13:00",
                    type: "transport",
                    title: "前往今昔館",
                    desc: "地鐵前往天神橋筋六丁目 (周遊卡免費)。",
                    map: "Tenjinbashisuji 6-chome Station",
                  },
                  {
                    time: "13:30",
                    type: "activity",
                    title: "大阪生活今昔館",
                    desc: "【穿越時空】重現了江戶時代大阪的街道與建築，可以穿著浴衣拍照，非常有氣氛。(周遊卡免費)",
                    map: "Osaka Museum of Housing and Living",
                  },
                  {
                    time: "15:30",
                    type: "activity",
                    title: "浪速之湯",
                    desc: "【天然溫泉】位於大樓頂樓的溫泉，有露天風呂，可以消除幾天走路的疲勞。(周遊卡免費)",
                    map: "Naniwa no Yu",
                  },
                  {
                    time: "17:45",
                    type: "transport",
                    title: "前往梅田",
                    desc: "地鐵至梅田站 (周遊卡免費)。",
                    map: "Umeda Station",
                  },
                  {
                    time: "18:15",
                    type: "food",
                    title: "晚餐 (梅田)",
                    desc: "梅田百貨林立，美食選擇非常多。",
                    map: "Grand Front Osaka",
                  },
                  {
                    time: "19:45",
                    type: "activity",
                    title: "梅田藍天大廈",
                    desc: "【空中庭園】360度露天展望台，地板有螢光石步道，夜景非常迷人。(注意入場時間)",
                    map: "Umeda Sky Building",
                  },
                  {
                    time: "21:00",
                    type: "transport",
                    title: "返回飯店",
                    desc: "御堂筋線回心齋橋。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                  },
                ],
              },
              day5: {
                title: "12/6 (五) 返程日",
                steps: "5,000",
                image: "Image/Kansai International Airport.jpg",
                events: [
                  {
                    time: "07:30",
                    type: "hotel",
                    title: "退房",
                    desc: "整理行李，辦理退房手續。",
                    map: "Hearton Hotel Shinsaibashi Nagahoridori",
                  },
                  {
                    time: "08:00",
                    type: "transport",
                    title: "前往關西機場",
                    desc: "搭乘電車前往機場，建議預留充裕時間。",
                    map: "Kansai International Airport",
                  },
                  {
                    time: "09:05",
                    type: "arrival",
                    title: "抵達機場櫃檯",
                    desc: "辦理登機與托運，逛逛機場免稅店。",
                    map: "Kansai International Airport",
                  },
                  {
                    time: "11:05",
                    type: "plane",
                    title: "飛機起飛",
                    desc: "帶著滿滿的回憶回家囉！Bye Bye Osaka!",
                    map: "Kansai International Airport",
                  },
                ],
              },
            };
      
            const foodData = [
              // --- OSAKA MAIN ---
              {
                name: "御好燒 Mizuno (美津の)",
                type: "大阪燒",
                area: "osaka",
                cat: "main",
                desc: "【米其林必比登連續6年推介】創業於1945年。特色是使用100%山藥泥製作的山藥燒，口感清淡不鹹。建議開店前排隊。",
                map: "Mizuno Okonomiyaki",
              },
              {
                name: "千房大阪燒",
                type: "大阪燒",
                area: "osaka",
                cat: "main",
                desc: "台灣人最愛名店，使用溫泉水製作麵糊，口感蓬鬆柔軟。提供中文菜單，點餐無障礙。",
                map: "Chibo Okonomiyaki Dotonbori",
              },
              {
                name: "翁 お好み焼き",
                type: "廣島燒/炒麵",
                area: "osaka",
                cat: "main",
                desc: "隱藏版老店(71年歷史)，招牌麻糬起司廣島燒。炒麵麵條粗Q。注意僅收現金。",
                map: "Okina Okonomiyaki Osaka",
              },
              {
                name: "新世界八重勝串炸",
                type: "串炸",
                area: "osaka",
                cat: "main",
                desc: "傳說中第一名好吃的串炸！食材新鮮，麵衣酥脆，搭配高麗菜非常解膩。",
                map: "Yaekatsu Kushikatsu",
              },
              {
                name: "元祖炸串達摩",
                type: "串炸",
                area: "osaka",
                cat: "main",
                desc: "大阪串炸代表，兇惡老伯伯公仔是標誌。特製油炸不油膩。切記「禁止二次沾醬」！",
                map: "Kushikatsu Daruma Dotonbori",
              },
              {
                name: "新世界串炸ㄧ德",
                type: "串炸",
                area: "osaka",
                cat: "main",
                desc: "口感清爽不油膩，麵衣較薄。在道頓堀有分店，適合想吃串炸又不想跑太遠的人。",
                map: "Kushikatsu Ittoku",
              },
              {
                name: "道頓堀 金龍拉麵",
                type: "拉麵",
                area: "osaka",
                cat: "main",
                desc: "立體巨龍招牌！24小時營業。雖然湯頭味道重，但無限添加的辣韭菜、泡菜、蒜頭是亮點。",
                map: "Kinryu Ramen",
              },
              {
                name: "雞Soba座銀",
                type: "拉麵",
                area: "osaka",
                cat: "main",
                desc: "心齋橋巷弄內的超濃雞白湯拉麵。擺盤精緻如法式料理，湯頭濃郁綿密，必吃推薦。",
                map: "Torisoba Zagin Niboshi",
              },
              {
                name: "三豐麵",
                type: "沾麵",
                area: "osaka",
                cat: "main",
                desc: "麵條極Q彈，豚骨魚介湯頭濃郁。柚子口味沾麵非常清爽。",
                map: "Sanpoumen Osaka",
              },
              {
                name: "金久右衛門",
                type: "醬油拉麵",
                area: "osaka",
                cat: "main",
                desc: "連續3年奪冠大阪最強拉麵！黑醬油拉麵外觀黑但入口回甘，關西醬油拉麵代表。",
                map: "Kingueon Ramen Dotonbori",
              },
              {
                name: "古潭拉麵",
                type: "拉麵",
                area: "osaka",
                cat: "main",
                desc: "50年老店，特色是加入大量豆芽菜。湯頭濃郁口感爽口，炒飯也很有名。",
                map: "Kotan Ramen Namba",
              },
              {
                name: "無鐵砲大阪店",
                type: "豚骨拉麵",
                area: "osaka",
                cat: "main",
                desc: "極度濃郁！使用300kg豚骨熬煮，膠原蛋白爆表。熱愛重口味豚骨者的聖地。",
                map: "Muteppou Ramen Osaka",
              },
              {
                name: "北極星蛋包飯",
                type: "蛋包飯",
                area: "osaka",
                cat: "main",
                desc: "蛋包飯的始祖之一。傳統日式洋食風味，心齋橋本店是傳統町家建築。",
                map: "Hokkyokusei Shinsaibashi",
              },
              {
                name: "自由軒咖哩飯",
                type: "咖哩飯",
                area: "osaka",
                cat: "main",
                desc: "大阪最古老西餐廳(百年歷史)。招牌「名物咖哩」是將生蛋打在熱騰騰咖哩飯上攪拌食用。",
                map: "Jiyuken Curry Namba",
              },
              {
                name: "今井烏龍麵",
                type: "烏龍麵",
                area: "osaka",
                cat: "main",
                desc: "道頓堀70年老店。金黃色湯頭以昆布鰹魚熬製，滋味優雅香醇。推薦鍋燒烏龍麵。",
                map: "Dotonbori Imai",
              },
              {
                name: "玄品河豚",
                type: "河豚",
                area: "osaka",
                cat: "main",
                desc: "著名的河豚料理專門店。可以安全地品嚐河豚生魚片、火鍋等多種吃法。",
                map: "Genpin Fugu",
              },
              {
                name: "松阪牛 燒肉M",
                type: "燒肉",
                area: "osaka",
                cat: "main",
                desc: "吃了回不去的美味！在充滿日式風情的包廂享用頂級松阪牛。",
                map: "Matsusakagyu Yakiniku M",
              },
              {
                name: "黑毛和牛 燒肉一",
                type: "燒肉",
                area: "osaka",
                cat: "main",
                desc: "推薦神戶牛男爵套餐。位於心齋橋，肉質優良，環境舒適。",
                map: "Yakiniku Ichi Shinsaibashi",
              },
              {
                name: "神戶石田屋 Ishida",
                type: "鐵板燒",
                area: "osaka",
                cat: "main",
                desc: "源自神戶的名店，在梅田也能吃到。師傅在面前現煎神戶牛，視覺味覺雙重享受。",
                map: "Teppanyaki Ishida Osaka",
              },
              {
                name: "本村炸牛排",
                type: "炸牛排",
                area: "osaka",
                cat: "main",
                desc: "超好玩體驗！將外酥內生的炸牛排放在小石爐上自己烤，口感軟嫩油脂豐富。",
                map: "Motomura Gyukatsu Namba",
              },
              {
                name: "釣船茶屋 ざうお",
                type: "特色餐廳",
                area: "osaka",
                cat: "main",
                desc: "邊釣魚邊吃飯！位於日本橋，座位旁就是大魚池，釣到的魚可以直接料理。",
                map: "Zauo Fishing Restaurant Namba",
              },
              {
                name: "名代 宇奈とと",
                type: "鰻魚飯",
                area: "osaka",
                cat: "main",
                desc: "CP值超高的鰻魚飯！炭火現烤，價格親民，是省錢又想吃鰻魚的好選擇。",
                map: "Unatoto Unagi",
              },
              {
                name: "大起水產迴轉壽司",
                type: "壽司",
                area: "osaka",
                cat: "main",
                desc: "每盤¥100起！產地直送新鮮魚貨，道頓堀店常有鮪魚解剖秀。有中文平板點餐。",
                map: "Daiki Suisan Dotonbori",
              },
      
              // --- OSAKA SNACK/SWEET ---
              {
                name: "道頓堀元祖章魚燒",
                type: "章魚燒",
                area: "osaka",
                cat: "main",
                desc: "Acchichi本舖。生意超好，章魚腳超大塊！人氣第一是醬油+蛋黃醬口味。",
                map: "Acchichi Honpo Dotonbori",
              },
              {
                name: "章魚燒道楽わなか",
                type: "章魚燒",
                area: "osaka",
                cat: "main",
                desc: "千日前名店。提供四種醬汁，章魚燒外脆內軟。天神橋筋店有內用座位。",
                map: "Takoyaki Wanaka",
              },
              {
                name: "551 Horai 蓬萊",
                type: "肉包",
                area: "osaka",
                cat: "main",
                desc: "大阪人靈魂美食！堅持當天生產販賣。外皮Q彈，內餡洋蔥豬肉多汁鮮美。",
                map: "551 Horai",
              },
              {
                name: "中村屋可樂餅",
                type: "小吃",
                area: "osaka",
                cat: "main",
                desc: "天神橋筋商店街名物。被譽為「驚人美味」的可樂餅，剛炸好熱騰騰最好吃。",
                map: "Nakamuraya Croquette",
              },
              {
                name: "Rikuro 老爺爺蛋糕",
                type: "甜點",
                area: "osaka",
                cat: "sweet",
                desc: "剛出爐會ㄉㄨㄞㄉㄨㄞ搖晃！口感像舒芙蕾般綿密。底部有葡萄乾點綴。",
                map: "Rikuro Ojisan no Mise",
              },
              {
                name: "HARBS",
                type: "甜點",
                area: "osaka",
                cat: "sweet",
                desc: "必吃水果千層蛋糕！奶油清爽不膩，夾滿新鮮水果。大丸心齋橋店有分店。",
                map: "HARBS Daimaru Shinsaibashi",
              },
              {
                name: "堂島ロール蛋糕捲",
                type: "甜點",
                area: "osaka",
                cat: "sweet",
                desc: "被譽為大阪最滿意的蛋糕捲。鮮奶油濃郁充滿奶香，不吃會後悔。",
                map: "Mon Cher Dojima Roll",
              },
              {
                name: "grenier",
                type: "甜點",
                area: "osaka",
                cat: "sweet",
                desc: "梅田人氣店。烤布蕾卡士達千層酥，口感咔滋酥脆，卡士達醬爆漿。",
                map: "Grenier Umeda",
              },
              {
                name: "丸福珈琲店",
                type: "咖啡",
                area: "osaka",
                cat: "sweet",
                desc: "昭和九年創業老店。復古氛圍濃厚。招牌熱鬆餅和布丁非常經典。",
                map: "Marufuku Coffee Sennichimae",
              },
              {
                name: "夫婦善哉",
                type: "甜點",
                area: "osaka",
                cat: "sweet",
                desc: "一份有兩碗紅豆湯，象徵夫妻圓滿。法善寺旁，冬天喝一碗非常溫暖。",
                map: "Meoto Zenzai",
              },
      
              // --- KYOTO ---
              {
                name: "奧丹湯豆腐",
                type: "京料理",
                area: "kyoto",
                cat: "main",
                desc: "清水寺旁300年老店。在日式庭園美景中享用手工精製湯豆腐，優雅的京都體驗。",
                map: "Okutan Kiyomizu",
              },
              {
                name: "南禪寺 順正",
                type: "京料理",
                area: "kyoto",
                cat: "main",
                desc: "擁有1200坪迴遊式庭園。名物是湯豆腐和湯葉(豆皮)料理。",
                map: "Junsei Nanzenji",
              },
              {
                name: "AWOMB",
                type: "壽司",
                area: "kyoto",
                cat: "main",
                desc: "IG熱門店，手織壽司。提供多種京野菜和生魚片，讓客人自己像織布一樣DIY手捲。",
                map: "AWOMB Karasuma",
              },
              {
                name: "三嶋亭",
                type: "壽喜燒",
                area: "kyoto",
                cat: "main",
                desc: "極品和牛壽喜燒！午餐時段CP值較高。建議務必提前預約。",
                map: "Mishima Tei Sukiyaki",
              },
              {
                name: "鳥岩樓",
                type: "親子丼",
                area: "kyoto",
                cat: "main",
                desc: "午餐限定的親子丼。濃郁的雞蛋和鮮嫩雞肉，是京都的老味道。",
                map: "Toriiwaro Kyoto",
              },
              {
                name: "GRILL 小寶",
                type: "洋食",
                area: "kyoto",
                cat: "main",
                desc: "平安神宮附近老字號洋食。招牌蛋包飯淋上特製多蜜醬(Demiglace Sauce)。",
                map: "Grill Kodai Kyoto",
              },
              {
                name: "新福菜館",
                type: "拉麵",
                area: "kyoto",
                cat: "main",
                desc: "京都車站旁排隊名店。特色是黑色的醬油湯頭和黑炒飯，味道醇厚。",
                map: "Shinpuku Saikan",
              },
              {
                name: "稲福",
                type: "特色烤串",
                area: "kyoto",
                cat: "main",
                desc: "伏見稻荷參道旁。特色是烤鵪鶉(烏茲拉)和烤麻雀！也有正常的稻荷壽司。",
                map: "Inafuku Fushimi Inari",
              },
              {
                name: "中村藤吉本店",
                type: "抹茶",
                area: "kyoto",
                cat: "sweet",
                desc: "宇治抹茶代名詞。必吃抹茶凍甜點杯。建議一早去排隊。",
                map: "Nakamura Tokichi Uji",
              },
              {
                name: "伊藤久右衛門",
                type: "抹茶",
                area: "kyoto",
                cat: "sweet",
                desc: "江戶時代老茶舖。推薦「宇治抹茶大福」和各種季節限定抹茶甜點。",
                map: "Itohkyuemon Uji",
              },
              {
                name: "Maccha House 抹茶館",
                type: "甜點",
                area: "kyoto",
                cat: "sweet",
                desc: "清水寺產寧坂有店。招牌是裝在木枡裡的「宇治抹茶提拉米蘇」，口感滑順。",
                map: "Maccha House Kyoto",
              },
              {
                name: "京都祇園Anon",
                type: "甜點",
                area: "kyoto",
                cat: "sweet",
                desc: "紅豆甜點專賣。「Anpoone」是讓客人自己將馬斯卡彭起司和紅豆餡夾入餅皮。",
                map: "Kyoto Gion Anon",
              },
              {
                name: "FRANÇOIS 咖啡廳",
                type: "咖啡",
                area: "kyoto",
                cat: "sweet",
                desc: "1934年開業，列入有形文化財。巴洛克風格裝潢像豪華遊輪，氣氛極佳。",
                map: "Francois Salon de The",
              },
            ];
      
            // ================= FUNCTIONS =================
      
            // 1. Router
            function router(sectionId) {
              // Hide all sections
              ["overview", "transport", "itinerary", "food", "prep"].forEach((id) => {
                document.getElementById(id).classList.add("hidden");
              });
      
              // Show target
              document.getElementById(sectionId).classList.remove("hidden");
      
              // Update Nav State
              document
                .querySelectorAll("nav button")
                .forEach((btn) => btn.classList.remove("active-nav", "text-sky-500"));
              const desktopBtn = document.getElementById(`nav-${sectionId}`);
              if (desktopBtn) desktopBtn.classList.add("active-nav", "text-sky-500");
      
              // Scroll to top
              window.scrollTo(0, 0);
      
              // Special triggers
              if (sectionId === "itinerary") renderItinerary("day1");
              if (sectionId === "food") renderFoodGrid(foodData);
              if (sectionId === "transport") renderCharts();
      
              // Close mobile menu
              document.querySelector(".mobile-menu").classList.add("hidden");
            }
      
            function toggleMobileMenu() {
              document.querySelector(".mobile-menu").classList.toggle("hidden");
            }
      
            // 2. Itinerary Renderer
            function renderItinerary(dayKey) {
              const container = document.getElementById("timeline-container");
              const data = itineraryData[dayKey];
      
              // Update Tabs UI
              document.querySelectorAll(".date-tab").forEach((tab) => {
                if (tab.getAttribute("onclick").includes(dayKey)) {
                  tab.classList.remove(
                    "bg-white",
                    "text-slate-600",
                    "border",
                    "border-slate-200"
                  );
                  tab.classList.add(
                    "bg-sky-500",
                    "text-white",
                    "shadow-lg",
                    "shadow-sky-200"
                  );
                } else {
                  tab.classList.add(
                    "bg-white",
                    "text-slate-600",
                    "border",
                    "border-slate-200"
                  );
                  tab.classList.remove(
                    "bg-sky-500",
                    "text-white",
                    "shadow-lg",
                    "shadow-sky-200"
                  );
                }
              });
      
              // Build Timeline HTML
              let html = `
                      <div class="mb-8 border-b border-slate-100 pb-6 fade-in">
                          <div class="h-48 md:h-64 rounded-2xl overflow-hidden mb-4">
                              <img src="${data.image}" alt="${data.title}" class="w-full h-full object-cover">
                          </div>
                          <h3 class="text-3xl font-bold text-slate-800">${data.title}</h3>
                          <div class="flex items-center gap-2 text-sm text-slate-500 mt-2 bg-slate-50 inline-block px-3 py-1 rounded-full">
                              <i data-lucide="footprints" class="w-4 h-4 text-rose-400"></i>
                              預估步數：<span class="font-semibold text-rose-500">${data.steps}</span> 步
                          </div>
                      </div>
                      <div class="relative timeline-line space-y-12 pl-4">
                  `;
      
              data.events.forEach((event, index) => {
                let icon = "map-pin";
                let colorClass = "bg-slate-100 text-slate-500";
      
                if (event.type === "transport") {
                  icon = "train";
                  colorClass = "bg-emerald-100 text-emerald-600";
                }
                if (event.type === "food") {
                  icon = "utensils";
                  colorClass = "bg-amber-100 text-amber-600";
                }
                if (event.type === "activity") {
                  icon = "camera";
                  colorClass = "bg-sky-100 text-sky-600";
                }
                if (event.type === "shop") {
                  icon = "shopping-bag";
                  colorClass = "bg-purple-100 text-purple-600";
                }
                if (event.type === "hotel") {
                  icon = "hotel";
                  colorClass = "bg-indigo-100 text-indigo-600";
                }
                if (event.type === "arrival" || event.type === "plane") {
                  icon = "plane";
                  colorClass = "bg-blue-600 text-white";
                }
      
                const delay = index * 100; // Stagger animation
      
                html += `
                          <div class="relative flex flex-col md:flex-row gap-6 z-10 fade-in" style="animation-delay: ${delay}ms">
                              <div class="flex-shrink-0 flex flex-col items-center md:items-start">
                                  <div class="absolute left-0 md:static w-10 h-10 rounded-full flex items-center justify-center shadow-md border-4 border-white ${colorClass} z-20">
                                      <i data-lucide="${icon}" class="w-5 h-5"></i>
                                  </div>
                                  <span class="mt-2 font-bold text-slate-400 text-sm hidden md:block w-16 text-center">${
                                    event.time
                                  }</span>
                              </div>
                              
                              <div class="flex-1 ml-8 md:ml-0 bg-white rounded-2xl border border-slate-100 shadow-sm card-hover group p-6">
                                   <div class="mb-4 rounded-xl overflow-hidden">
                                       <img src="${event.eventImage}" alt="${event.title}" class="w-full h-32 object-cover">
                                   </div>
                                   <div class="flex justify-between items-start mb-2">
                                      <div>
                                           <span class="md:hidden text-xs font-bold text-slate-400 mb-1 block">${
                                             event.time
                                           }</span>
                                           <h4 class="text-xl font-bold text-slate-800">${
                                             event.title
                                           }</h4>
                                      </div>
                                      <a href="${getMap(
                                        event.map
                                      )}" target="_blank" class="flex-shrink-0 text-xs flex items-center gap-1 text-sky-600 bg-sky-50 hover:bg-sky-100 px-3 py-1.5 rounded-full transition-colors font-medium">
                                          <i data-lucide="map" class="w-3 h-3"></i> 導航
                                      </a>
                                   </div>
                                   <p class="text-slate-600 leading-relaxed text-sm">${
                                     event.desc
                                   }</p>
                              </div>
                          </div>
                      `;
              });
      
              html += `</div>`;
              container.innerHTML = html;
              lucide.createIcons();
            }
      // 3. Food Renderer & Filter
      function renderFoodGrid(items) {
        const container = document.getElementById("food-grid");
        container.innerHTML = items
          .map(
            (item, index) => `
                <div class="bg-white rounded-2xl border border-slate-100 shadow-sm card-hover flex flex-col h-full fade-in p-5" style="animation-delay: ${
                  index * 50
                }ms">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex gap-2">
                             <span class="px-2 py-1 rounded-md text-xs font-bold ${
                               item.area === "osaka"
                                 ? "bg-sky-50 text-sky-600"
                                 : "bg-emerald-50 text-emerald-600"
                             }">
                                ${item.area === "osaka" ? "大阪" : "京都"}
                            </span>
                            <span class="px-2 py-1 rounded-md text-xs font-medium bg-slate-100 text-slate-600">
                                ${item.type}
                            </span>
                        </div>
                    </div>
                    
                    <h3 class="font-bold text-lg text-slate-800 mb-2 leading-tight">${
                      item.name
                    }</h3>
                    <p class="text-sm text-slate-500 leading-relaxed flex-1">${
                      item.desc
                    }</p>
                    
                    <div class="mt-4 pt-4 border-t border-slate-50 flex justify-between items-center">
                        <span class="text-xs text-slate-400 font-medium">${
                          item.cat === "main" ? "正餐/鹹食" : "甜點/咖啡"
                        }</span>
                        <a href="${getMap(
                          item.map
                        )}" target="_blank" class="text-sm font-bold text-amber-500 hover:text-amber-600 flex items-center gap-1 transition-colors">
                            查看地圖 <i data-lucide="arrow-right" class="w-4 h-4"></i>
                        </a>
                    </div>
                </div>
            `
          )
          .join("");
        lucide.createIcons();
      }

      function filterFood(category) {
        // Update UI buttons
        document.querySelectorAll(".food-filter").forEach((btn) => {
          // Reset basic style
          btn.className =
            "food-filter flex-1 md:flex-none px-4 py-2 rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 transition-all text-center";

          // Active style check
          if (btn.getAttribute("onclick").includes(category)) {
            btn.className =
              "food-filter flex-1 md:flex-none active px-4 py-2 rounded-full bg-slate-800 text-white transition-all text-center shadow-lg shadow-slate-300";
          }

          // Specific colors for inactive buttons to look nice
          if (!btn.className.includes("bg-slate-800")) {
            if (btn.innerText.includes("正餐"))
              btn.classList.add(
                "bg-amber-50",
                "text-amber-700",
                "hover:bg-amber-100"
              );
            else if (btn.innerText.includes("甜點"))
              btn.classList.add(
                "bg-pink-50",
                "text-pink-700",
                "hover:bg-pink-100"
              );
          }
        });

        // Filter Logic
        if (category === "all") {
          renderFoodGrid(foodData);
        } else if (category === "osaka" || category === "kyoto") {
          renderFoodGrid(foodData.filter((i) => i.area === category));
        } else if (category === "sweet") {
          renderFoodGrid(foodData.filter((i) => i.cat === "sweet"));
        } else if (category === "main") {
          renderFoodGrid(foodData.filter((i) => i.cat === "main"));
        }
      }

      // 4. Chart Logic
      let chartsInitialized = false;
      function renderCharts() {
        if (chartsInitialized) return;

        // Cost Chart
        const ctxCost = document.getElementById("costChart").getContext("2d");
        new Chart(ctxCost, {
          type: "bar",
          data: {
            labels: ["12/3 大阪南", "12/4 京都", "12/5 周遊卡日"],
            datasets: [
              {
                label: "單人交通/門票預估 (¥)",
                data: [1380, 1550, 480],
                backgroundColor: ["#38bdf8", "#34d399", "#f59e0b"],
                borderRadius: 8,
                borderSkipped: false,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { position: "bottom" },
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: { borderDash: [2, 4] },
              },
              x: {
                grid: { display: false },
              },
            },
          },
        });

        // Steps Chart
        const ctxStep = document.getElementById("stepChart").getContext("2d");
        new Chart(ctxStep, {
          type: "line",
          data: {
            labels: ["12/2", "12/3", "12/4", "12/5", "12/6"],
            datasets: [
              {
                label: "步數預估",
                data: [3000, 16000, 18000, 17000, 5000],
                borderColor: "#f43f5e",
                backgroundColor: (context) => {
                  const ctx = context.chart.ctx;
                  const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                  gradient.addColorStop(0, "rgba(244, 63, 94, 0.4)");
                  gradient.addColorStop(1, "rgba(244, 63, 94, 0.0)");
                  return gradient;
                },
                fill: true,
                tension: 0.4,
                pointRadius: 4,
                pointHoverRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { position: "bottom" },
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: { borderDash: [2, 4] },
              },
              x: {
                grid: { display: false },
              },
            },
          },
        });

        chartsInitialized = true;
      }

      // Initialize Icons on load
      lucide.createIcons();
    </script>
  </body>
</html>
